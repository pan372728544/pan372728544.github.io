<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JLRouter | Pan&#39;s Blog</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/assets/css/0.styles.f637169d.css" as="style"><link rel="preload" href="/assets/js/app.908dfad3.js" as="script"><link rel="preload" href="/assets/js/47.12910615.js" as="script"><link rel="prefetch" href="/assets/js/10.337b1fe3.js"><link rel="prefetch" href="/assets/js/11.fbbc3d23.js"><link rel="prefetch" href="/assets/js/12.85a2c405.js"><link rel="prefetch" href="/assets/js/13.59074305.js"><link rel="prefetch" href="/assets/js/14.966daf17.js"><link rel="prefetch" href="/assets/js/15.ac446f82.js"><link rel="prefetch" href="/assets/js/16.928714ad.js"><link rel="prefetch" href="/assets/js/17.703cf8f6.js"><link rel="prefetch" href="/assets/js/18.613035e7.js"><link rel="prefetch" href="/assets/js/19.9cadccd2.js"><link rel="prefetch" href="/assets/js/2.e9e429c4.js"><link rel="prefetch" href="/assets/js/20.8b804bb6.js"><link rel="prefetch" href="/assets/js/21.93a312f8.js"><link rel="prefetch" href="/assets/js/22.c43fa6cb.js"><link rel="prefetch" href="/assets/js/23.dd7a6de9.js"><link rel="prefetch" href="/assets/js/24.7b66814a.js"><link rel="prefetch" href="/assets/js/25.8c76c392.js"><link rel="prefetch" href="/assets/js/26.22556371.js"><link rel="prefetch" href="/assets/js/27.7cf975c4.js"><link rel="prefetch" href="/assets/js/28.2088bc31.js"><link rel="prefetch" href="/assets/js/29.b328e730.js"><link rel="prefetch" href="/assets/js/3.fc5cd66f.js"><link rel="prefetch" href="/assets/js/30.72707481.js"><link rel="prefetch" href="/assets/js/31.86032cea.js"><link rel="prefetch" href="/assets/js/32.bf03ba96.js"><link rel="prefetch" href="/assets/js/33.eb49a028.js"><link rel="prefetch" href="/assets/js/34.4a07196d.js"><link rel="prefetch" href="/assets/js/35.7a226b76.js"><link rel="prefetch" href="/assets/js/36.db5eec9a.js"><link rel="prefetch" href="/assets/js/37.cdc338c4.js"><link rel="prefetch" href="/assets/js/38.34a35d7d.js"><link rel="prefetch" href="/assets/js/39.695deec3.js"><link rel="prefetch" href="/assets/js/4.7aa51947.js"><link rel="prefetch" href="/assets/js/40.f1dc7d30.js"><link rel="prefetch" href="/assets/js/41.1d34bbf6.js"><link rel="prefetch" href="/assets/js/42.423d3ca5.js"><link rel="prefetch" href="/assets/js/43.d353af94.js"><link rel="prefetch" href="/assets/js/44.de7ee57e.js"><link rel="prefetch" href="/assets/js/45.a6e7ec4a.js"><link rel="prefetch" href="/assets/js/46.2781428a.js"><link rel="prefetch" href="/assets/js/48.ec325e20.js"><link rel="prefetch" href="/assets/js/49.7e6b0e34.js"><link rel="prefetch" href="/assets/js/5.34d295cb.js"><link rel="prefetch" href="/assets/js/50.686eceeb.js"><link rel="prefetch" href="/assets/js/51.813c0a41.js"><link rel="prefetch" href="/assets/js/52.ef636f45.js"><link rel="prefetch" href="/assets/js/53.4c0b4978.js"><link rel="prefetch" href="/assets/js/54.6f9c7b33.js"><link rel="prefetch" href="/assets/js/55.4fc94690.js"><link rel="prefetch" href="/assets/js/56.1999815f.js"><link rel="prefetch" href="/assets/js/57.4678e399.js"><link rel="prefetch" href="/assets/js/58.60bc5f58.js"><link rel="prefetch" href="/assets/js/59.a600a8bd.js"><link rel="prefetch" href="/assets/js/6.dccabf12.js"><link rel="prefetch" href="/assets/js/60.7064c1b5.js"><link rel="prefetch" href="/assets/js/61.321797c3.js"><link rel="prefetch" href="/assets/js/62.29b63639.js"><link rel="prefetch" href="/assets/js/7.46fb0051.js"><link rel="prefetch" href="/assets/js/8.adc2b779.js"><link rel="prefetch" href="/assets/js/9.c180848b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f637169d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Pan's Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Object-C</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/oc/runtime/" class="nav-link">Runtime</a></li><li class="dropdown-item"><!----> <a href="/oc/kvo/" class="nav-link">KVO</a></li><li class="dropdown-item"><!----> <a href="/oc/runloop/" class="nav-link">RunLoop</a></li><li class="dropdown-item"><!----> <a href="/oc/other/" class="nav-link router-link-active">Other</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Swift</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/swift/" class="nav-link">Swift4.2</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">C/C++</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/c/" class="nav-link">C/C++</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Multi-Platform</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Native Group</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/h5/flutter/" class="nav-link">Flutter</a></li><li class="dropdown-subitem"><a href="/h5/swiftui/" class="nav-link">SwiftUI</a></li><li class="dropdown-subitem"><a href="/h5/reactnative/" class="nav-link">React-native</a></li><li class="dropdown-subitem"><a href="/h5/cordova/" class="nav-link">Cordova</a></li><li class="dropdown-subitem"><a href="/h5/weex/" class="nav-link">Weex</a></li></ul></li><li class="dropdown-item"><h4>Web Group</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/h5/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/h5/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/h5/js/" class="nav-link">JS</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/pan372728544" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Object-C</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/oc/runtime/" class="nav-link">Runtime</a></li><li class="dropdown-item"><!----> <a href="/oc/kvo/" class="nav-link">KVO</a></li><li class="dropdown-item"><!----> <a href="/oc/runloop/" class="nav-link">RunLoop</a></li><li class="dropdown-item"><!----> <a href="/oc/other/" class="nav-link router-link-active">Other</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Swift</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/swift/" class="nav-link">Swift4.2</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">C/C++</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/c/" class="nav-link">C/C++</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Multi-Platform</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Native Group</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/h5/flutter/" class="nav-link">Flutter</a></li><li class="dropdown-subitem"><a href="/h5/swiftui/" class="nav-link">SwiftUI</a></li><li class="dropdown-subitem"><a href="/h5/reactnative/" class="nav-link">React-native</a></li><li class="dropdown-subitem"><a href="/h5/cordova/" class="nav-link">Cordova</a></li><li class="dropdown-subitem"><a href="/h5/weex/" class="nav-link">Weex</a></li></ul></li><li class="dropdown-item"><h4>Web Group</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/h5/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/h5/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/h5/js/" class="nav-link">JS</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/pan372728544" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/oc/other/" class="sidebar-link">排序算法</a></li><li><a href="/oc/other/JLRouter.html" class="active sidebar-link">JLRouter</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#jlroutes原理" class="sidebar-link">JLRoutes原理:</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#个人理解原理" class="sidebar-link">个人理解原理 :</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#预热" class="sidebar-link">预热</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#开始步骤" class="sidebar-link">开始步骤 :</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#为程序配置url-schemes" class="sidebar-link">为程序配置URL Schemes</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#注册" class="sidebar-link">注册</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#自定义命名空间注册" class="sidebar-link">自定义命名空间注册</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#实现openurl方法" class="sidebar-link">实现openUrl方法</a></li><li class="sidebar-sub-header"><a href="/oc/other/JLRouter.html#最后-整体实现" class="sidebar-link">最后 , 整体实现</a></li></ul></li><li><a href="/oc/other/git.html" class="sidebar-link">Git使用</a></li><li><a href="/oc/other/aframework.html" class="sidebar-link">静态库</a></li><li><a href="/oc/other/copy.html" class="sidebar-link">深拷贝和浅拷贝</a></li><li><a href="/oc/other/Jenkins.html" class="sidebar-link">Jenkins 在MAC上的配置使用</a></li><li><a href="/oc/other/pod.html" class="sidebar-link">pod</a></li><li><a href="/oc/other/spec.html" class="sidebar-link">创建私有的Spec Repo</a></li><li><a href="/oc/other/package.html" class="sidebar-link">自动打包命令</a></li><li><a href="/oc/other/autoPackage.html" class="sidebar-link">MAC下使用Jekins自动打包iOS项目</a></li><li><a href="/oc/other/spec22.html" class="sidebar-link">创建私有库的索引</a></li><li><a href="/oc/other/time.html" class="sidebar-link">应用启用时间</a></li><li><a href="/oc/other/load.html" class="sidebar-link">load &amp; initialize</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="jlrouter"><a href="#jlrouter" aria-hidden="true" class="header-anchor">#</a> JLRouter</h1> <h2 id="介绍"><a href="#介绍" aria-hidden="true" class="header-anchor">#</a> 介绍</h2> <p>JLRoutes是一个调用极少代码 , 可以很方便的处理不同URL schemes以及解析它们的参数，并通过回调block来处理URL对应的操作 , 可以用于处理复杂跳转逻辑的三方库.</p> <ol><li><p>在日常开发中 , push , present 出现在整个程序的各个地方 , 如果你想快速理清一个项目的整体逻辑 , 非常麻烦 . 大多数情况 , 你得找到代码目录 ,根据层级结构分出关系 , 然后找到对应的push位置 , 寻找下一级页面 , 如果本身项目的目录就非常乱 , 那么如果要了解一个项目的整体跳转逻辑 , 非常的难.
即便可以将 UIViewController-Swizzled 库集成到项目中 ,然后一页一页点击查询 , 但也是比较痛苦的.
如果 , 是把整个项目的跳转逻辑都给抽取出来 , 单独放在一个类 , 模块化管理 , 那么思路就会清晰很多 , 甚至可以用XMind根据代码画出整个项目的树状图</p></li> <li><p>如果所处公司存在多个app , app之间互相推荐 , 互相跳转是再正常不过的需求,就类似于QQ , 微信三方分享跳转等 .如果用Appdelegate原生方法进行拦截 , 所做的事至少得是判断Scheme是否匹配 , 想办法进入需要跳到的界面 , 如果要涉及传参 , 就更加麻烦.</p></li> <li><p>如果用户是从PC端识别二维码,或者通过链接想要进入app指定页面</p></li></ol> <h2 id="jlroutes原理"><a href="#jlroutes原理" aria-hidden="true" class="header-anchor">#</a> JLRoutes原理:</h2> <p>JLRoutes本质可以理解为:保存一个全局的Map，key是url，value是对应存放block的数组，url和block都会常驻在内存中，当打开一个URL时，JLRoutes就可以遍历 , 这个全局的map，通过url来执行对应的block。</p> <h2 id="个人理解原理"><a href="#个人理解原理" aria-hidden="true" class="header-anchor">#</a> 个人理解原理 :</h2> <ol><li>routeControllersMap 是全局的单例字典 , 你可以想象成一个大的盒子 .<br>
2 . 这个盒子里装了很多的字典 , 而字典的key值对应 一个标识 , 源码中称之为 scheme ,为了不混淆 , 咱们就叫其为JLRoutes对象标识 . 这个标识对应的value值 为JLRoutes类的对象 .</li> <li>JLRoutes对象有很多属性 , 常用的有两个 , 一个是 scheme 也就是是上述所说的JLRoutes对象标识 , 也就是说 , 此value值记录了自己的key值 . 另外一个属性为 routes数组 , 此数组中存放了 JLRRouteDefinition 对象 .</li> <li>JLRRouteDefinition对象为最终的具体模型 , 也就是说 你注册的跳转逻辑的所有信息 , 都存在于这个模型中 ,包括要实施操作的block代码块 , JLRoutes对象标识 , 取url内容值的标识</li></ol> <h2 id="预热"><a href="#预热" aria-hidden="true" class="header-anchor">#</a> 预热</h2> <p>首先了解 , 如何通过设置app URL Scheme由外部跳转到app ?</p> <p>首先 , 配置info.plist —&gt;添加URL types字段 , 你会发现其为一个数组 –&gt;然后咱们在item 0 处在加一个URL Schemes , 又是一个数组 .这里说明了一个问题 , 一个app可以对应多个scheme —&gt;配置scheme , URL identifier 最好设置复杂些 , 保证其唯一性</p> <p>同个手机app应用之间的跳转也是如此 , 只需要调用openUrl方法 , 在另外个应用设置scheme . 例如 , A应用跳转到B应用, 那么设置B应用的scheme 为 com.mengyao_block@outlook.com:// , 在A应用中调用[[UIApplication
sharedApplication]openURL:[NSURL URLWithString:@&quot;com.mengyao_block@outlook.com://&quot;]]方法 , 即可跳转到B应用 . 那么 , 假如有很多的应用都在跳转B应用 , 那么如何区分是由哪个app跳转过来 , 跳转过来又需要执行什么操作呢 ? 可以 设置多个scheme , 拦截openUrl方法 , 取出url 进行解析 , 判断 . 比如com.mengyao_block@outlook.com:// scheme代表了执行登录 , com.baidu.www:// scheme代表了执行授权 等等 . 那又将如何判断是由哪个应用跳转过来呢 ? 只需要附带上参数即可 , 例如 com.mengyao_block@outlook.com://JinSeJiaYuan 这就代表了是从金色家园app跳转过来 , 需要执行登录操作 …
那么 , 如果是跳到指定的页面呢 ? 首先一种方式是可以拦截openUrl方法 , 然后实现跳转 , 但是此方法跳转如果涉及传参 , 或者越了多级跳转 , 会非常的困难 . 还有一种方式, 就是利用JLRoutes</p> <h2 id="开始步骤"><a href="#开始步骤" aria-hidden="true" class="header-anchor">#</a> 开始步骤 :</h2> <h2 id="为程序配置url-schemes"><a href="#为程序配置url-schemes" aria-hidden="true" class="header-anchor">#</a> 为程序配置URL Schemes</h2> <p>平时咱们所用到的第三方分享跳转 , 也是用到了这个原理 , 通过解析参数 , 跳转到指定页面
一个app可以对应多个URL Scheme , 如下图 info.plist配置 , 在safari中 , 只要输入 JLRoutesOne:// 或JLRoutesTwo:// 或JLRoutesThree:// 都可以打开该app , 而URL identifier 最好是保证其唯一性 , 这里咱们为app设置了3个URL Schemes ,是为了后面手动解析URL而做的准备 .</p> <h2 id="注册"><a href="#注册" aria-hidden="true" class="header-anchor">#</a> 注册</h2> <p>首先 , 考虑的问题有两个 , 一是什么时候注册跳转逻辑 , 二是 在什么地方注册<br>
比如一个项目的tabbarItem有3个 , 那么这3个模块的跳转 , 并不是由 一个navigationController来完成 , 所以考虑到这点 , 我们可以创建一个分类 , 将跳转逻辑放在其中 , 在初始化tabbarController时 进行注册跳转逻辑</p> <h3 id="注册的方式有很多种"><a href="#注册的方式有很多种" aria-hidden="true" class="header-anchor">#</a> 注册的方式有很多种 :</h3> <h3 id="注册全局jlroutes"><a href="#注册全局jlroutes" aria-hidden="true" class="header-anchor">#</a> 注册全局JLRoutes</h3> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> globalRoutes<span class="token punctuation">]</span>addRoute<span class="token punctuation">:</span>@<span class="token string">&quot;取url内容值的标识&quot;</span> handler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token function">BOOL</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull parameters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
           <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span> <span class="token comment">//一旦匹配 , 立即返回YES</span>
   <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>//此方法对应的JLRoutes对象标识为 @”JLRoutesGlobalRoutesScheme” , 由下述源码可知 , 用globalRoutes方式创建的JLRoutes对象 , 无论创建多少次 , 始终对应着同一个实例 . 也就是说 , 无论你调用上述方法多少次 , 尽管 @”取url内容值的标识” 和block块内容不一样 , 最后都会执行第一次注册的内容 . 此方法和咱们要实现的3个tabbarItem对应 3种跳转要求不合 , 因为 咱们要求的是 block块中的navigationController为 3个不同的实例对象.</p> <h2 id="自定义命名空间注册"><a href="#自定义命名空间注册" aria-hidden="true" class="header-anchor">#</a> 自定义命名空间注册</h2> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>	<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@“第一模块的标识”<span class="token punctuation">]</span>addRoute<span class="token punctuation">:</span>@<span class="token string">&quot;取url内容值的标识&quot;</span> handler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token function">BOOL</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull parameters<span class="token punctuation">)</span><span class="token punctuation">{</span>
	 
	        <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//此注册方法 , 所得的JLRoutes对象都是唯一的 ,而这才是咱们真正需要的 , 如下述源码</span>
<span class="token comment">//源码如下 , 注释不用看 , 为自己分析源码的笔记</span>

	<span class="token operator">+</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>globalRoutes
	<span class="token punctuation">{</span>
	    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">self</span> routesForScheme<span class="token punctuation">:</span><span class="token builtin">JLRoutesGlobalRoutesScheme</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
 
	<span class="token operator">+</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>routesForScheme<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">)</span>scheme
	<span class="token punctuation">{</span>
	    <span class="token comment">//路由对象</span>
	    <span class="token builtin">JLRoutes</span> <span class="token operator">*</span>routesController <span class="token operator">=</span> <span class="token constant">nil</span><span class="token punctuation">;</span>
	 
	    <span class="token keyword">static</span> dispatch_once_t onceToken<span class="token punctuation">;</span>
	    <span class="token function">dispatch_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>onceToken<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>
	 
	        <span class="token comment">//全局单例字典</span>
	        routeControllersMap <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSMutableDictionary</span> alloc<span class="token punctuation">]</span> <span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	    <span class="token comment">//如果是不存在以scheme为key的字典 , 就创建一个 , 防止重复创建</span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>routeControllersMap<span class="token punctuation">[</span>scheme<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	        routesController <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">self</span> alloc<span class="token punctuation">]</span> <span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;---------------------%@&quot;</span><span class="token punctuation">,</span>routesController<span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token comment">//路由存储scheme (globel或自定义)</span>
	        routesController<span class="token punctuation">.</span>scheme <span class="token operator">=</span> scheme<span class="token punctuation">;</span>
	 
	        <span class="token comment">//以scheme作为key值 --对应路由对象为value</span>
	 
	#warning  <span class="token operator">-</span> 只要我通过global命名空间创建了<span class="token builtin">JLRoutes</span>对象 <span class="token punctuation">,</span> routeControllersMap<span class="token punctuation">[</span>scheme<span class="token punctuation">]</span>就是有值的<span class="token punctuation">,</span>一旦有值 <span class="token punctuation">,</span> 我第二次创建时 <span class="token punctuation">,</span> 无论以什么命名空间创建 <span class="token punctuation">,</span> 都会被赋上之前第一个的值 <span class="token punctuation">.</span> 从而 <span class="token punctuation">,</span>就算我多次调用global方法创建对象 <span class="token punctuation">,</span><span class="token builtin">JLRoutes</span>对象始终保持为第一个<span class="token punctuation">.</span>这也就是解释了为什么多次注册 <span class="token punctuation">,</span> 始终只有第一个注册里的block被调用的原因 <span class="token punctuation">.</span> 当设置了优先级 <span class="token punctuation">,</span> 插入排序使得高优先级位于队列前方 <span class="token punctuation">,</span> 优先被搜索出来<span class="token punctuation">,</span><span class="token keyword">return</span>掉 <span class="token punctuation">.</span> 然而也只有一个注册得以实现 <span class="token punctuation">.</span> 原本要实现的是 <span class="token punctuation">,</span> 在创建<span class="token number">3</span>个navigationController时 <span class="token punctuation">,</span> 分别注册四次 <span class="token punctuation">,</span> 运用<span class="token number">3</span>个不同的navigationController进行<span class="token number">3</span>个模块内跳转 <span class="token punctuation">,</span> 然后始终只有第一个生成的navigationController生效 <span class="token punctuation">,</span> 因为后面创建的三次都被内部给覆盖掉<span class="token punctuation">.</span>
	 
	        <span class="token comment">//新增以scheme为key 对应 JLRoutes对象为键值的字典</span>
	        routeControllersMap<span class="token punctuation">[</span>scheme<span class="token punctuation">]</span> <span class="token operator">=</span> routesController<span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	 
	    <span class="token comment">//将value值赋值给当前路由对象   (注意:  这里的routeControllersMap 是全局单例 , 当我用global创建的对象反复addRoutes时,所创建的Routes对象都会被赋值最开始那个对象的值 , 如下)</span>
	    routesController <span class="token operator">=</span> routeControllersMap<span class="token punctuation">[</span>scheme<span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	#warning  <span class="token operator">--</span><span class="token operator">-</span> 在全局字典中存储一份路由的字典 <span class="token punctuation">,</span> 由设置的global或者自定义scheme 为key取<span class="token builtin">JLRoutes</span>对象
	    <span class="token keyword">return</span> routesController<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span>
	``` 
### 定义优先级 
<span class="token comment">//简单来说 , 如果不设置优先级 , 所有的注册优先级都为 0 . 当标识了优先级进行注册后 , JLRRouteDefinition 对象(最终模型)在 JLRoutes对象的routes数组中 , 将进行排序 , 类似于选择排序 , 当通过route对象 寻找到其 routes数组后 , 将会遍历整个routes数组 , 优先级高的JLRRouteDefinition对象将会被最先匹配 , 然后return YES , 停止遍历 . 咱们暂时用不上这个优先级 , 就不进行过多讲述 . 因为咱们注册的3个跳转 , 每个对应的routes数组中元素仅为1个</span>
``` swift
       <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> globalRoutes<span class="token punctuation">]</span>addRoute<span class="token punctuation">:</span>@<span class="token string">&quot;取url内容值的标识&quot;</span> priority<span class="token punctuation">:</span><span class="token number">1</span> handler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token function">BOOL</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull parameters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
        <span class="token comment">//要实现的操作</span>
 
        <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h3 id="跳转点击"><a href="#跳转点击" aria-hidden="true" class="header-anchor">#</a> 跳转点击</h3> <p>// 此处 , 三个Scheme头都不一样 , 但是正如 一种所讲 , 这三个命令我都添加进了info.plist , 所以这三种写法都可以跳转</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>	    <span class="token number">1</span><span class="token punctuation">.</span>  第一个模块
	 <span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>touch
	<span class="token punctuation">{</span>
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>url <span class="token operator">=</span> @<span class="token string">&quot;JLRoutesOne://OneNextViewController&quot;</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span>openURL<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token constant">NSURL</span> <span class="token builtin">URLWithString</span><span class="token punctuation">:</span>url<span class="token punctuation">]</span> options<span class="token punctuation">:</span><span class="token constant">nil</span> completionHandler<span class="token punctuation">:</span><span class="token constant">nil</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	<span class="token punctuation">}</span>
	 
	  <span class="token number">2</span><span class="token punctuation">.</span> 第二个模块
	 <span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>touch
	<span class="token punctuation">{</span>
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>url <span class="token operator">=</span> @<span class="token string">&quot;JLRoutesTwo://TwoNextViewController&quot;</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span>openURL<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token constant">NSURL</span> <span class="token builtin">URLWithString</span><span class="token punctuation">:</span>url<span class="token punctuation">]</span> options<span class="token punctuation">:</span>@<span class="token punctuation">{</span>@<span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesTwo&quot;</span><span class="token punctuation">}</span> completionHandler<span class="token punctuation">:</span><span class="token constant">nil</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	<span class="token punctuation">}</span>
	 
	 <span class="token number">3</span><span class="token punctuation">.</span>第三个模块
	 <span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>touch
	<span class="token punctuation">{</span>
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>url <span class="token operator">=</span> @<span class="token string">&quot;JLRoutesThree://ThreeNextViewController&quot;</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span>openURL<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token constant">NSURL</span> <span class="token builtin">URLWithString</span><span class="token punctuation">:</span>url<span class="token punctuation">]</span> options<span class="token punctuation">:</span>@<span class="token punctuation">{</span>@<span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesThree&quot;</span><span class="token punctuation">}</span> completionHandler<span class="token punctuation">:</span><span class="token constant">nil</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="实现openurl方法"><a href="#实现openurl方法" aria-hidden="true" class="header-anchor">#</a> 实现openUrl方法</h2> <p>//手动解析URL , Scheme如果从网页跳转过来 , 拦截到的会变成小写 , 故, 直接将URL Scheme拦截下来 , 转换小写进行判断. 经过处理之后 , 交于JLRoutes进行解析 , 寻找具体的操作</p> <p>//这里也解释了 , 为什么在info.plist文件中 , 要设定3个不同的URL Scheme . 当在3个不同模块中进行跳转点击时 , 这个方法是必经过 , 然后进行拦截 , 判断具体是哪个模块后交于JLRoutes解析</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>	<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">BOOL</span><span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span> <span class="token operator">*</span><span class="token punctuation">)</span>app openURL<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token constant">NSURL</span> <span class="token operator">*</span><span class="token punctuation">)</span>url options<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">UIApplicationOpenURLOptionsKey</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span><span class="token punctuation">)</span>options
	<span class="token punctuation">{</span>
	 
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>str <span class="token operator">=</span> url<span class="token punctuation">.</span>absoluteString<span class="token punctuation">;</span>
	    <span class="token builtin">NSArray</span> <span class="token operator">*</span>arr <span class="token operator">=</span> <span class="token punctuation">[</span>str componentsSeparatedByString<span class="token punctuation">:</span>@<span class="token string">&quot;://&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>firstObject lowercaseString<span class="token punctuation">]</span> isEqualToString<span class="token punctuation">:</span>@<span class="token string">&quot;jlroutesone&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	 
	        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesOne&quot;</span><span class="token punctuation">]</span>routeURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>firstObject lowercaseString<span class="token punctuation">]</span> isEqualToString<span class="token punctuation">:</span>@<span class="token string">&quot;jlroutestwo&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	 
	        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesTwo&quot;</span><span class="token punctuation">]</span>routeURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	 
	    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesThree&quot;</span><span class="token punctuation">]</span>routeURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	 
	<span class="token comment">// JLRoute 通过遍历对应的 JLRoutes对象的routes数组 , 进行解析 , 并执行block中内容 , 具体解析 参考源码</span>
	<span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@“”<span class="token punctuation">]</span>routeURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span>
	```
## 参数传递 <span class="token punctuation">,</span> 以及tabbarController 选中问题处理 
### 参数传递需要进行一一对应 <span class="token punctuation">.</span>
``` swift
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesOne&quot;</span><span class="token punctuation">]</span>addRoute<span class="token punctuation">:</span>@<span class="token string">&quot;/:ViewController/:userID/:pass&quot;</span> handler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token function">BOOL</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull parameters<span class="token punctuation">)</span><span class="token punctuation">{</span>
	 
	        <span class="token builtin">Class</span> <span class="token class-name">class</span> <span class="token operator">=</span> <span class="token function">NSClassFromString</span><span class="token punctuation">(</span>parameters<span class="token punctuation">[</span>@<span class="token string">&quot;ViewController&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;-----------userID : %@&quot;</span><span class="token punctuation">,</span>parameters<span class="token punctuation">[</span>@<span class="token string">&quot;userID&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;-----------pass   : %@&quot;</span><span class="token punctuation">,</span>parameters<span class="token punctuation">[</span>@<span class="token string">&quot;pass&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token punctuation">[</span>navVc pushViewController<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">class</span> <span class="token class-name">alloc</span><span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span> animated<span class="token punctuation">:</span><span class="token constant">YES</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;-------------------第一模块&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token keyword">self</span><span class="token punctuation">.</span>selectedIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//解决从app外跳转进来的tabbar选中问题</span>
	        <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	```
点击方法如下
``` swift
	<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>touch
	<span class="token punctuation">{</span>
	 
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>url <span class="token operator">=</span> @<span class="token string">&quot;JLRoutesOne://OneNextViewController/我是userID/我是pwd&quot;</span><span class="token punctuation">;</span>
	 
	    <span class="token comment">//中文传输需要进行转义</span>
	    url <span class="token operator">=</span> <span class="token punctuation">[</span>url stringByAddingPercentEncodingWithAllowedCharacters<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token builtin">NSCharacterSet</span> <span class="token builtin">URLQueryAllowedCharacterSet</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span>openURL<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token constant">NSURL</span> <span class="token builtin">URLWithString</span><span class="token punctuation">:</span>url<span class="token punctuation">]</span> options<span class="token punctuation">:</span><span class="token constant">nil</span> completionHandler<span class="token punctuation">:</span><span class="token constant">nil</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	<span class="token punctuation">}</span>
	
	处理从网页等跳转过来 <span class="token punctuation">,</span> 比如直接跳到第二模块的第二级控制器 <span class="token punctuation">,</span> 实际上以及跳转了 <span class="token punctuation">,</span>tabbarItem还选中第一个 <span class="token punctuation">.</span> 只需要在block块中处理一下selectedIndex就行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>未解决问题 :</p> <ol><li>block块中 , 像push的下级传递参数问题 . 2. 传递参数为非框架中的类时 , 比如自定义模型<br>
总结: JLRoutes主要作用有两个 :</li> <li>用于处理从网页跳转至app指定页面</li> <li>多个应用间的互相跳转<br>
然而如果想要实现全部页面之间跳转 , 从而取代模态和push , 不太现实</li></ol> <h2 id="最后-整体实现"><a href="#最后-整体实现" aria-hidden="true" class="header-anchor">#</a> 最后 , 整体实现</h2> <p>UINavigationController分别包装了 OneViewController , TwoViewController , ThreeViewController , 然后分别为MYTabbarController的三个子控制器 .</p> <p>现在咱们要实现的是 , 利用JLRoutes 可以从OneViewController跳转到下级界面OneNextViewController , TwoViewController跳转到下级页面TwoNextViewController , …..</p> <p>AppDelegate类</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>	<span class="token keyword">import</span> <span class="token string">&quot;AppDelegate.h&quot;</span>
	<span class="token keyword">import</span> <span class="token string">&quot;JLRoutes.h&quot;</span>
	<span class="token keyword">import</span> <span class="token string">&quot;MYTabbarViewController.h&quot;</span>
	 
	 
	@interface <span class="token class-name">AppDelegate</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
	 
	@end
	 
	@implementation <span class="token builtin">AppDelegate</span>
	 
	 
	<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">BOOL</span><span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span> <span class="token operator">*</span><span class="token punctuation">)</span>application didFinishLaunchingWithOptions<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span> <span class="token operator">*</span><span class="token punctuation">)</span>launchOptions <span class="token punctuation">{</span>
	 
	    <span class="token keyword">self</span><span class="token punctuation">.</span>window <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIWindow</span> alloc<span class="token punctuation">]</span>initWithFrame<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token builtin">UIScreen</span> mainScreen<span class="token punctuation">]</span><span class="token punctuation">.</span>bounds<span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token keyword">self</span><span class="token punctuation">.</span>window<span class="token punctuation">.</span>rootViewController <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">MYTabbarViewController</span> alloc<span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>window makeKeyAndVisible<span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//openUrl方法   在此处对所有的跳转进行拦截 , 手动解析处理 , 再交于JLRoutes</span>
	<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">BOOL</span><span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UIApplication</span> <span class="token operator">*</span><span class="token punctuation">)</span>app openURL<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token constant">NSURL</span> <span class="token operator">*</span><span class="token punctuation">)</span>url options<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">UIApplicationOpenURLOptionsKey</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span><span class="token punctuation">)</span>options
	<span class="token punctuation">{</span>
	 
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>str <span class="token operator">=</span> url<span class="token punctuation">.</span>absoluteString<span class="token punctuation">;</span>
	    <span class="token builtin">NSArray</span> <span class="token operator">*</span>arr <span class="token operator">=</span> <span class="token punctuation">[</span>str componentsSeparatedByString<span class="token punctuation">:</span>@<span class="token string">&quot;://&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>firstObject lowercaseString<span class="token punctuation">]</span> isEqualToString<span class="token punctuation">:</span>@<span class="token string">&quot;jlroutesone&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	 
	        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesOne&quot;</span><span class="token punctuation">]</span>routeURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>firstObject lowercaseString<span class="token punctuation">]</span> isEqualToString<span class="token punctuation">:</span>@<span class="token string">&quot;jlroutestwo&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	 
	        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesTwo&quot;</span><span class="token punctuation">]</span>routeURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	 
	    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesThree&quot;</span><span class="token punctuation">]</span>routeURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token builtin">MYTabbarController</span>类
@interface <span class="token class-name">MYTabbarViewController</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
 
@end
 
@implementation <span class="token builtin">MYTabbarViewController</span>
 
<span class="token comment">//添加子控制器 , 分别注册三个模块的跳转逻辑</span>
	<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>viewDidLoad <span class="token punctuation">{</span>
	    <span class="token punctuation">[</span><span class="token keyword">super</span> viewDidLoad<span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token builtin">OneViewController</span> <span class="token operator">*</span>oneVc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">OneViewController</span> alloc<span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	    oneVc<span class="token punctuation">.</span>title <span class="token operator">=</span> @<span class="token string">&quot;一&quot;</span><span class="token punctuation">;</span>
	 
	    <span class="token builtin">UINavigationController</span> <span class="token operator">*</span>oneNav <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UINavigationController</span> alloc<span class="token punctuation">]</span>initWithRootViewController<span class="token punctuation">:</span>oneVc<span class="token punctuation">]</span><span class="token punctuation">;</span>
	    <span class="token punctuation">[</span><span class="token keyword">self</span> registerRouteWithA<span class="token punctuation">:</span>oneNav<span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token builtin">TwoViewController</span> <span class="token operator">*</span>twoVc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">TwoViewController</span> alloc<span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	    <span class="token builtin">UINavigationController</span> <span class="token operator">*</span>twoNav <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UINavigationController</span> alloc<span class="token punctuation">]</span>initWithRootViewController<span class="token punctuation">:</span>twoVc<span class="token punctuation">]</span><span class="token punctuation">;</span>
	    twoVc<span class="token punctuation">.</span>title <span class="token operator">=</span> @<span class="token string">&quot;二&quot;</span><span class="token punctuation">;</span>
	    <span class="token punctuation">[</span><span class="token keyword">self</span> registerRouteWithB<span class="token punctuation">:</span>twoNav<span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token builtin">ThreeViewController</span> <span class="token operator">*</span>threeVc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">ThreeViewController</span> alloc<span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	    <span class="token builtin">UINavigationController</span> <span class="token operator">*</span>threeNav <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UINavigationController</span> alloc<span class="token punctuation">]</span>initWithRootViewController<span class="token punctuation">:</span>threeVc<span class="token punctuation">]</span><span class="token punctuation">;</span>
	    threeVc<span class="token punctuation">.</span>title <span class="token operator">=</span> @<span class="token string">&quot;三&quot;</span><span class="token punctuation">;</span>
	    <span class="token keyword">self</span><span class="token punctuation">.</span>viewControllers <span class="token operator">=</span> @<span class="token punctuation">[</span>oneNav<span class="token punctuation">,</span>twoNav<span class="token punctuation">,</span>threeNav<span class="token punctuation">]</span><span class="token punctuation">;</span>
	    <span class="token punctuation">[</span><span class="token keyword">self</span> registerRouteWithC<span class="token punctuation">:</span>threeNav<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><p>注册跳转逻辑如下
下述的@”JLRoutesOne”,@”…Two”….均可随意拟定 , 仅为JLRoutes实例对象标识 , 不做任何要求 . 后面参数传递也是如此 , 自行拟定</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>	<span class="token comment">//第一模块跳转逻辑</span>
	<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>registerRouteWithA<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UINavigationController</span> <span class="token operator">*</span><span class="token punctuation">)</span>navVc
	<span class="token punctuation">{</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesOne&quot;</span><span class="token punctuation">]</span>addRoute<span class="token punctuation">:</span>@<span class="token string">&quot;/:ViewController/:userID/:pass&quot;</span> handler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token function">BOOL</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull parameters<span class="token punctuation">)</span><span class="token punctuation">{</span>
	 
	  <span class="token comment">//此处viewController key值对应的是 touch方法中的第一个值 , userID对应第二个值 , pass对应第三个 ...</span>
	  <span class="token comment">//作者github上的实现 ?userID=123&amp;pwd=321 这种方式传递参数我没有实现 , 不知道什么原因..</span>
	        <span class="token builtin">Class</span> <span class="token class-name">class</span> <span class="token operator">=</span> <span class="token function">NSClassFromString</span><span class="token punctuation">(</span>parameters<span class="token punctuation">[</span>@<span class="token string">&quot;ViewController&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;-----------userID : %@&quot;</span><span class="token punctuation">,</span>parameters<span class="token punctuation">[</span>@<span class="token string">&quot;userID&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;-----------pass   : %@&quot;</span><span class="token punctuation">,</span>parameters<span class="token punctuation">[</span>@<span class="token string">&quot;pass&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token punctuation">[</span>navVc pushViewController<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">class</span> <span class="token class-name">alloc</span><span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span> animated<span class="token punctuation">:</span><span class="token constant">YES</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;-------------------第一模块&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token keyword">self</span><span class="token punctuation">.</span>selectedIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//解决从app外跳转进来的tabbar选中问题</span>
	        <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//第二模块跳转逻辑</span>
	<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>registerRouteWithB<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UINavigationController</span> <span class="token operator">*</span><span class="token punctuation">)</span>navVc
	<span class="token punctuation">{</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesTwo&quot;</span><span class="token punctuation">]</span>addRoute<span class="token punctuation">:</span>@<span class="token string">&quot;/:ViewControllerTwo&quot;</span> handler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token function">BOOL</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull parameters<span class="token punctuation">)</span><span class="token punctuation">{</span>
	 
	        <span class="token builtin">Class</span> <span class="token class-name">class</span> <span class="token operator">=</span> <span class="token function">NSClassFromString</span><span class="token punctuation">(</span>parameters<span class="token punctuation">[</span>@<span class="token string">&quot;ViewControllerTwo&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	        <span class="token punctuation">[</span>navVc pushViewController<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">class</span> <span class="token class-name">alloc</span><span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span> animated<span class="token punctuation">:</span><span class="token constant">YES</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;-------------------第二模块&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	        <span class="token keyword">self</span><span class="token punctuation">.</span>selectedIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	        <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//第三模块跳转逻辑</span>
	<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>registerRouteWithC<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">UINavigationController</span> <span class="token operator">*</span><span class="token punctuation">)</span>navVc
	<span class="token punctuation">{</span>
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">JLRoutes</span> routesForScheme<span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesThree&quot;</span><span class="token punctuation">]</span>addRoute<span class="token punctuation">:</span>@<span class="token string">&quot;/:ViewControllerThree&quot;</span> handler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token function">BOOL</span><span class="token punctuation">(</span><span class="token builtin">NSDictionary</span><span class="token operator">&lt;</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">,</span>id<span class="token operator">&gt;</span> <span class="token operator">*</span> _Nonnull parameters<span class="token punctuation">)</span><span class="token punctuation">{</span>
	 
	 
	        <span class="token builtin">Class</span> <span class="token class-name">class</span> <span class="token operator">=</span> <span class="token function">NSClassFromString</span><span class="token punctuation">(</span>parameters<span class="token punctuation">[</span>@<span class="token string">&quot;ViewControllerThree&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	        <span class="token punctuation">[</span>navVc pushViewController<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">class</span> <span class="token class-name">alloc</span><span class="token punctuation">]</span><span class="token keyword">init</span><span class="token punctuation">]</span> animated<span class="token punctuation">:</span><span class="token constant">YES</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	        <span class="token keyword">self</span><span class="token punctuation">.</span>selectedIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">&quot;-------------------第三模块&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	        <span class="token keyword">return</span> <span class="token constant">YES</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>注意 : 下述方法的前面 , 需和info.plist文件中定义的3个schemes保持一致 . 分别对应着三个模块 , 用于appdelegate 中openUrl方法拦截时区分模块</p> <p>OneViewController类</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>	<span class="token comment">//第一模块按钮点击事件</span>
	<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>touch
	<span class="token punctuation">{</span>
	 
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>url <span class="token operator">=</span> @<span class="token string">&quot;JLRoutesOne://OneNextViewController/我是userID/我是pwd&quot;</span><span class="token punctuation">;</span>
	 
	    <span class="token comment">//中文传输需要进行转义</span>
	    url <span class="token operator">=</span> <span class="token punctuation">[</span>url stringByAddingPercentEncodingWithAllowedCharacters<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token builtin">NSCharacterSet</span> <span class="token builtin">URLQueryAllowedCharacterSet</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span>openURL<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token constant">NSURL</span> <span class="token builtin">URLWithString</span><span class="token punctuation">:</span>url<span class="token punctuation">]</span> options<span class="token punctuation">:</span><span class="token constant">nil</span> completionHandler<span class="token punctuation">:</span><span class="token constant">nil</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	<span class="token punctuation">}</span>

<span class="token builtin">TwoViewController</span> 类

	<span class="token comment">//第二模块按钮点击</span>
	<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>touch
	<span class="token punctuation">{</span>
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>url <span class="token operator">=</span> @<span class="token string">&quot;JLRoutesTwo://TwoNextViewController&quot;</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span>openURL<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token constant">NSURL</span> <span class="token builtin">URLWithString</span><span class="token punctuation">:</span>url<span class="token punctuation">]</span> options<span class="token punctuation">:</span><span class="token constant">nil</span> completionHandler<span class="token punctuation">:</span><span class="token constant">nil</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>ThreeViewController类</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token comment">//第三模块按钮点击</span>
	<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>touch
	<span class="token punctuation">{</span>
	    <span class="token builtin">NSString</span> <span class="token operator">*</span>url <span class="token operator">=</span> @<span class="token string">&quot;JLRoutesThree://ThreeNextViewController&quot;</span><span class="token punctuation">;</span>
	 
	    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">UIApplication</span> sharedApplication<span class="token punctuation">]</span>openURL<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token constant">NSURL</span> <span class="token builtin">URLWithString</span><span class="token punctuation">:</span>url<span class="token punctuation">]</span> options<span class="token punctuation">:</span>@<span class="token punctuation">{</span>@<span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span>@<span class="token string">&quot;JLRoutesThree&quot;</span><span class="token punctuation">}</span> completionHandler<span class="token punctuation">:</span><span class="token constant">nil</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	 
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">1/2/2019, 6:09:18 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/oc/other/" class="prev router-link-active">
          排序算法
        </a></span> <span class="next"><a href="/oc/other/git.html">
          Git使用
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.908dfad3.js" defer></script><script src="/assets/js/47.12910615.js" defer></script>
  </body>
</html>
